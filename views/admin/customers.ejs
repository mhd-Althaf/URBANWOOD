<%-include("../../views/partials/admin/header")%>
<!-- partial -->
<div class="main-panel">
    <!-- content-wrapper ends -->
    <div class="card-body">
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (data.length > 0) { %>  <!-- Ensure the table renders only if data exists -->
                        <% for (let i = 0; i < data.length; i++) { %>  
                        <tr>
                            <td><%= data[i].name %></td>
                            <td><%= data[i].email %></td>
                            <td><%= data[i].phone %></td>
                            <td>
                                <% if (!data[i].isBlocked) { %>
                                    <a href="/admin/blockCustomer?id=<%= data[i].id %>" class="btn btn-danger text-white" style="text-decoration: none; width: 80px;">Block</a>
                                <% } else { %>
                                    <a href="/admin/unBlockCustomer?id=<%= data[i].id %>" class="btn btn-success text-white" style="text-decoration: none; width: 80px;">Unblock</a>
                                <% } %>
                            </td>
                        </tr>
                        <% } %>  
                    <% } else { %>
                        <tr>
                            <td colspan="4" class="text-center">No customers found</td> <!-- Fixed colspan to 4 -->
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Pagination -->
    <div class="container mt-3">
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center mb-20" style="margin-right: 200px;">
                <% for (let i = 1; i <= totalPages; i++) { %>
                    <li class="page item <%= (i === currentPage) ? 'active' : '' %>">
                        <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                    </li>
                <% } %>
            </ul>
        </nav>
    </div>
</div>

<!-- main-panel ends -->
<!-- container-scroller -->
<!-- plugins:js -->
<script src="/assets/vendors/js/vendor.bundle.base.js"></script>
<!-- endinject -->
<!-- Plugin js for this page -->
<script src="/assets/vendors/chart.js/Chart.min.js"></script>
<script src="/assets/vendors/progressbar.js/progressbar.min.js"></script>
<script src="/assets/vendors/jvectormap/jquery-jvectormap.min.js"></script>
<script src="/assets/vendors/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<script src="/assets/vendors/owl-carousel-2/owl.carousel.min.js"></script>
<!-- End plugin js for this page -->
<!-- inject:js -->
<script src="/assets/js/off-canvas.js"></script>
<script src="/assets/js/hoverable-collapse.js"></script>
<script src="/assets/js/misc.js"></script>
<script src="/assets/js/settings.js"></script>
<script src="/assets/js/todolist.js"></script>
<!-- endinject -->
<!-- Custom js for this page -->
<script src="/assets/js/dashboard.js"></script>
<!-- End custom js for this page -->
</body>
</html>
